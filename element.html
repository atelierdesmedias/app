<!doctype html>
<html lang="fr-FR">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name='robots' content='noindex, nofollow'>
    <title>Atelier des Medias - Element</title>
    <meta name="description" content="Liens vers les sites, réseaux sociaux et outils de l'ADM">

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#0d2f39">
    <meta name="apple-mobile-web-app-title" content="ADM">
    <meta name="application-name" content="ADM">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="theme-color" content="#ffffff">
    <script src="https://kit.fontawesome.com/ac5688d412.js" crossorigin="anonymous"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style type="text/tailwindcss">
      @layer components {
        .btn {
          @apply border-2 border-emerald-500 text-emerald-500 rounded-full py-2 w-48;
        }
      }
    </style>
    <style type="text/css">
      body {
          background-color: #ffffff;
          background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cg fill='%23eeebf3' fill-opacity='0.4'%3E%3Cpolygon fill-rule='evenodd' points='8 4 12 6 8 8 6 12 4 8 0 6 4 4 6 0 8 4'/%3E%3C/g%3E%3C/svg%3E");
        }
    </style>
    <script>
      document.addEventListener("DOMContentLoaded", function(event) {
        // try to launch app
        setTimeout(() => {
          window.location = 'element://room';
        }, 100);

        // handle copying of server URL
        const copy = document.getElementById('copy');
        copy.addEventListener("click", function(event) {
            var copyText = document.getElementById("server");
            copyText.select();
            copyText.setSelectionRange(0, 99999); /* For mobile devices */
            navigator.clipboard.writeText(copyText.value);
        });

        // Detects if device is on Mac
        const isMac = () => {
          const userAgent = window.navigator.userAgent.toLowerCase();
          return /macintosh|macos|mac os/.test( userAgent );
        }
        // Detects if device is on Windows
        const isWindows = () => {
          const userAgent = window.navigator.userAgent.toLowerCase();
          return /win/.test( userAgent );
        }
        // Detects if device is on Linux
        const isLinux = () => {
          const userAgent = window.navigator.userAgent.toLowerCase();
          return /linux/.test( userAgent );
        }
        // Detects if device is on Android
        const isAndroid = () => {
          const userAgent = window.navigator.userAgent.toLowerCase();
          return /android|silk/.test( userAgent );
        }
        // Detects if device is on iOS
        const isIos = () => {
          const userAgent = window.navigator.userAgent.toLowerCase();
          return /iphone|ipad|ipod/.test( userAgent );
        }

        let sysclass = '.hidden';

        if (isIos()) {
            sysclass = '.ios';
        } else if (isMac()) {
            sysclass = '.mac';
        } else if (isAndroid()) {
            sysclass = '.android';
        } else if (isLinux()) {
            sysclass = '.linux';
        } else if (isWindows()) {
            sysclass = '.windows';
        }

        document.querySelectorAll(sysclass).forEach((el) => {
            el.classList.remove('hidden');
        })
      });
    </script>
  </head>
  <body class="m-4">
    <div class="mx-auto max-w-md">
        <h1 class="text-center text-lg font-bold mb-4">
            Télécharger Element si l'application n'est pas installée
        </h1>
        <div class="text-center flex flex-col gap-4">
            <a href="https://apps.apple.com/app/vector/id1083446067" target="_blank" class="mac self-center hidden">
                <img src="macappstore.svg" width="188">
            </a>
            <a href="https://apps.apple.com/app/vector/id1083446067" target="_blank" class="ios self-center hidden">
                <img src="appstore.svg" width="152">
            </a>
            <a href="https://play.google.com/store/apps/details?id=im.vector.app" target="_blank" class="android self-center hidden">
                <img src="playstore.svg" width="162">
            </a>
            <a href="https://packages.riot.im/desktop/install/macos/Element.dmg" target="_blank" class="mac self-center btn hidden">
                <i class="fa-brands fa-apple"></i> Mac
            </a>
            <a href="https://packages.riot.im/desktop/install/win32/x64/Element%20Setup.exe" target="_blank" class="windows self-center btn hidden">
                <i class="fa-brands fa-windows"></i> Windows (64 bit)
            </a>
            <a href="https://element.io/get-started#linux-details" target="_blank" class="linux self-center btn hidden">
                <i class="fa-brands fa-linux"></i> Linux
            </a>
            <noscript>
                <a href="https://element.io/get-started#download" target="_blank" class="self-center btn">
                    Télécharger Element
                </a>
            </noscript>
        </div>
        <h1 class="text-center text-lg font-bold mt-8 mb-4">
            Configuration du serveur de l'Atelier des Médias
        </h1>
        <p class="text-center my-2">
            Après avoir lancé Element, cliquer sur "Modifier" puis saisir l'adresse suivante dans "Autre serveur d'accueil" :
        </p>
        <p class="text-center">
            <input type="text" id="server" value="matrix.atelier-medias.org" class="border px-2 py-1 text-center w-52">
            <i class="fa-solid fa-copy ml-1 cursor-pointer text-emerald-500 font-bold" id="copy" title="Copier"></i>
        </p>
        <div class="text-center flex flex-col my-4">
            <a href="element://room" target="_blank" class="self-center btn">
                Lancer Element
            </a>
        </div>
        <p class="text-center">
            <a href="/" class="text-emerald-500">
                Retour
            </a>
        </p>
    </div>
  </body>
</html>
